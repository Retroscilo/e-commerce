generator client {
    provider        = "prisma-client-js"
    previewFeatures = ["referentialIntegrity"]
}

datasource db {
    provider             = "mysql"
    url                  = env("DATABASE_URL")
    referentialIntegrity = "prisma"
}

model Product {
    id          Int                       @id @default(autoincrement())
    name        String
    description String
    price       Decimal
    image       String
    quantity    Int
    created_at  DateTime                  @default(now())
    carts       ProductCartRelation[]
    categories  ProductCategoryRelation[]
}

model Category {
    id          Int                       @id @default(autoincrement())
    name        String
    description String
    products    ProductCategoryRelation[]
}

model User {
    id      Int    @id @default(autoincrement())
    email   String @unique
    name    String
    Cart    Cart?  @relation(fields: [cart_id], references: [id])
    cart_id Int?
}

model Cart {
    id         Int                   @id @default(autoincrement())
    quantity   Int?
    created_at DateTime              @default(now())
    users      User[]
    products   ProductCartRelation[]
}

model ProductCategoryRelation {
    product    Product  @relation(fields: [productId], references: [id])
    productId  Int // relation scalar field (used in the `@relation` attribute above)
    category   Category @relation(fields: [categoryId], references: [id])
    categoryId Int // relation scalar field (used in the `@relation` attribute above)
    assignedAt DateTime @default(now())

    @@id([productId, categoryId])
}

model ProductCartRelation {
    product    Product  @relation(fields: [productId], references: [id])
    productId  Int // relation scalar field (used in the `@relation` attribute above)
    cart       Cart     @relation(fields: [cartId], references: [id])
    cartId     Int // relation scalar field (used in the `@relation` attribute above)
    assignedAt DateTime @default(now())

    @@id([productId, cartId])
}
